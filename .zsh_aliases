# wraps alias with command detection
function setup_alias() {
  local alias_name="$1"
  local alias_command="$2"

  if command -v "${alias_command%% *}" &>/dev/null; then
    alias "$alias_name"="$alias_command"
  else
    echo "command ${alias_command} not found, alias $alias_name skipped"
  fi
}

setup_alias "ls" "ls --color=auto"
setup_alias "ll" "ls --color=auto -l"

setup_alias "prc" "pre-commit"

setup_alias "gs" "git status"
setup_alias "ga" "git add"
setup_alias "gap" "git add -p"
setup_alias "gc" "git commit"
setup_alias "gcm" "git commit -m"
setup_alias "gp" "git push"
setup_alias "gd" "git diff"
setup_alias "gds" "git diff --staged"

# delete git branches whose name start with on of the following prefixes:
setup_alias "git-clean-branches" 'git branch -d \
  $(git branch -l "chore/*") \
  $(git branch -l "docs/*") \
  $(git branch -l "feat/*") \
  $(git branch -l "feature/*") \
  $(git branch -l "fix/*") \
  $(git branch -l "hotfix/*") \
  2>/dev/null || echo "no branches to clean"'

# load current directory .env key/value pairs as environment variables
setup_alias "load-env" 'set -o allexport && source .env && set +o allexport'

setup_alias "awslogin" 'aws sso login --profile cyprien-dev'

setup_alias "cd" "z"
